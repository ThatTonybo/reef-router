/*reef-router 1.0
Created by ThatTonybo (github.com/ThatTonybo)
Licensed under the MIT License*/
class ReefRouter{constructor(t){this.main=t.main,this.pages=t.pages,this.defaultPage=t.defaultPage||Object.keys(this.pages)[0],this.appName=t.appName||"My App",this.updatePageTitle=t.updatePageTitle||!0,this.pageTitleFormat=t.pageTitleFormat||"{title} | {appName}",document.addEventListener("render",async e=>{if(console.log(this.updatePageTitle),this.updatePageTitle){const t=await this.getPageTitle(this.defaultPage);document.title=t}const a=new URLSearchParams(window.location.search).get("p");if(history.state&&(t.main.data.page=history.state.id,this.updatePageTitle)){const t=await this.getPageTitle(history.state.id);document.title=t}if(a&&(t.main.data.page=a,this.updatePageTitle)){const t=await this.getPageTitle(a);document.title=t}},!1)}async getPageTitle(t){return new Promise((e,a)=>{return e(this.pageTitleFormat.replace("{title}",this.pages[t]).replace("{id}",t).replace("{appName}",this.appName))})}change(t){const e=document.getElementById(t).getAttribute("router-page");this.pages[e]&&(history.pushState({id:e},this.getPageTitle(e),`?p=${e}`),this.main.data.page=e)}}